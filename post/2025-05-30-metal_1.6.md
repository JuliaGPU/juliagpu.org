+++
title = "Metal.jl 1.6: Initial MPSGraph Support"
author = "Christian Guinard"
abstract = """
  Metal.jl adds initial support for MPSGraph, with the matrix multiplication functions
  wrapped, resolving some matrix multiplication issues in the previous method.
"""
+++

{{abstract}}


## Initial MPSGraph support

[PR #526](https://github.com/JuliaGPU/Metal.jl/pull/526) enabled the automatic
generation of wrappers for all `enum`s, `struct`s, and Objective-C objects for
the frameworks that Metal.jl relies upon. This made adding support for [MPSGraph](https://developer.apple.com/documentation/metalperformanceshadersgraph?language=objc),
Apple's MLIR gpu compiler interface, realistic.

To try out the new framework, constructor and method wrappers necessary for matrix
multiplication were added, as well as linking it to the LinearAlgebra interface to
work around the [NaN issue](https://github.com/JuliaGPU/Metal.jl/pull/381) that
could show up on M1/M2 devices.

However, the more exciting aspect is that it is now easier to add functionality that
has been long-requested. One can find MPSGraph functionality not yet in Metal.jl and
write wrappers using the existing wrappers as a starting point. If anyone is
interested in helping out, feel free to open a pull request or an issue on the
[Metal.jl repository](https://github.com/JuliaGPU/Metal.jl), and we will do our best
to help you get your code merged.

## Minor Changes

Metal.jl 1.6 also includes several other useful updates:

- [Fixes](https://github.com/JuliaGPU/Metal.jl/pull/559) with using irrationals in kernels.
- [Many](https://github.com/JuliaGPU/Metal.jl/pull/529) [improvements](https://github.com/JuliaGPU/Metal.jl/pull/531) [and](https://github.com/JuliaGPU/Metal.jl/pull/533) [fixes](https://github.com/JuliaGPU/Metal.jl/pull/544) [to](https://github.com/JuliaGPU/Metal.jl/pull/582) [intrinsics](https://github.com/JuliaGPU/Metal.jl/pull/561).
- [Support](https://github.com/JuliaGPU/Metal.jl/pull/557) for `pow` with an `Integer` exponent .

As always, we encourage users to update to the latest version to benefit from these
improvements and bug fixes. Check out the
[changelog](https://github.com/JuliaGPU/Metal.jl/releases/tag/v1.6.0) for a full list
of changes.
